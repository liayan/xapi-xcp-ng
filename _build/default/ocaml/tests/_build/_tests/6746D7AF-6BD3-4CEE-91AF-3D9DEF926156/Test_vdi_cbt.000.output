[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'session'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'auth'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'subject'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'role'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'task'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'event'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'pool'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'pool_patch'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'pool_update'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VM'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VM_metrics'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VM_guest_metrics'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VMPP'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VMSS'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VM_appliance'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'DR_task'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'host'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'host_crashdump'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'host_patch'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'host_metrics'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'host_cpu'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'network'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VIF'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VIF_metrics'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PIF'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PIF_metrics'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'Bond'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VLAN'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'SM'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'SR'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'sr_stat'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'probe_result'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'LVHD'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VDI'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VBD'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VBD_metrics'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PBD'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'crashdump'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VTPM'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'console'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'user'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'data_source'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'blob'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'message'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'secret'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'tunnel'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'network_sriov'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PCI'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PGPU'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'GPU_group'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VGPU'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VGPU_type'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PVS_site'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PVS_server'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PVS_proxy'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PVS_cache_storage'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'Feature'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'SDN_controller'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'vdi_nbd_server_info'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'PUSB'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'USB_group'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'VUSB'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'Cluster'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'Cluster_host'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'Certificate'
[20230915T14:36:35.573Z|debug||0 ||xapi] Adding new database table: 'Diagnostics'
[20230915T14:36:35.573Z| info||0 ||redo_log] Flushing database to all active redo-logs
[20230915T14:36:35.573Z|debug||0 ||xapi] About to flush database: ./xapi-db.xml
[20230915T14:36:35.573Z| info||0 ||redo_log] Flushing database to all active redo-logs
[20230915T14:36:35.575Z|debug||0 ||sql] XML backend [./xapi-db.xml] -- Write buffer flushed. Time: 0.001900
[20230915T14:36:35.575Z|error||0 ||dbsync] Cannot read IP address. Check the control interface has an IP address
[20230915T14:36:35.575Z|debug||0 ||db_write] create_row host_metrics (OpaqueRef:88cd7701-85df-49a6-a420-670e18f8d91d) [(_ref,v),(uuid,v),(memory__total,v),(memory__free,v),(live,v),(last_updated,v),(other_config,v)]
[20230915T14:36:35.576Z|debug||0 ||db_write] create_row host (OpaqueRef:b9af88b0-b0b9-4332-a5cd-3533f9f0a82e) [(_ref,v),(uuid,v),(name__label,v),(name__description,v),(memory__overhead,v),(allowed_operations,v),(current_operations,v),(API_version__major,v),(API_version__minor,v),(API_version__vendor,v),(API_version__vendor_implementation,v),(enabled,v),(software_version,v),(other_config,v),(capabilities,v),(cpu_configuration,v),(sched_policy,v),(supported_bootloaders,v),(logging,v),(suspend_image_sr,v),(crash_dump_sr,v),(cpu_info,v),(hostname,v),(address,v),(metrics,v),(license_params,v),(boot_free_mem,v),(ha_statefiles,v),(ha_network_peers,v),(blobs,v),(tags,v),(external_auth_type,v),(external_auth_service_name,v),(external_auth_configuration,v),(edition,v),(license_server,v),(bios_strings,v),(power_on_mode,v),(power_on_config,v),(local_cache_sr,v),(chipset_info,v),(ssl_legacy,v),(guest_VCPUs_params,v),(display,v),(virtual_hardware_platform_versions,v),(control_domain,v),(updates_requiring_reboot,v),(iscsi_iqn,v),(multipathing,v),(uefi_certificates,v),(editions,v),(https_only,v)]
[20230915T14:36:35.576Z|error||0 ||helpers] Failed to find domain zero (uuid = b568ecde-50ed-4090-abc7-9692051655b0)
[20230915T14:36:35.576Z|debug||0 ||db_write] create_row VM (OpaqueRef:2eba0df7-7cd7-43d5-a76f-9e452c8f17da) [(_ref,v),(uuid,v),(allowed_operations,v),(current_operations,v),(name__label,v),(name__description,v),(power_state,v),(user_version,v),(is_a_template,v),(is_default_template,v),(suspend_VDI,v),(resident_on,v),(scheduled_to_be_resident_on,v),(affinity,v),(memory__overhead,v),(memory__target,v),(memory__static_max,v),(memory__dynamic_max,v),(memory__dynamic_min,v),(memory__static_min,v),(VCPUs__params,v),(VCPUs__max,v),(VCPUs__at_startup,v),(actions__after_shutdown,v),(actions__after_reboot,v),(actions__after_crash,v),(PV__bootloader,v),(PV__kernel,v),(PV__ramdisk,v),(PV__args,v),(PV__bootloader_args,v),(PV__legacy_args,v),(HVM__boot_policy,v),(HVM__boot_params,v),(HVM__shadow_multiplier,v),(platform,v),(PCI_bus,v),(other_config,v),(domid,v),(domarch,v),(last_boot_CPU_flags,v),(is_control_domain,v),(metrics,v),(guest_metrics,v),(last_booted_record,v),(recommendations,v),(xenstore_data,v),(ha_always_run,v),(ha_restart_priority,v),(is_a_snapshot,v),(snapshot_of,v),(snapshot_time,v),(transportable_snapshot_id,v),(blobs,v),(tags,v),(blocked_operations,v),(snapshot_info,v),(snapshot_metadata,v),(parent,v),(bios_strings,v),(protection_policy,v),(is_snapshot_from_vmpp,v),(snapshot_schedule,v),(is_vmss_snapshot,v),(appliance,v),(start_delay,v),(shutdown_delay,v),(order,v),(suspend_SR,v),(version,v),(generation_id,v),(hardware_platform_version,v),(has_vendor_device,v),(requires_reboot,v),(reference_label,v),(domain_type,v),(NVRAM,v)]
[20230915T14:36:35.576Z|debug||0 ||create_misc] Domain 0 record does not have associated metrics record. Creating now
[20230915T14:36:35.577Z|debug||0 ||db_write] create_row VM_metrics (OpaqueRef:b9a4c361-8626-4f78-824d-9957ef703137) [(_ref,v),(uuid,v),(memory__actual,v),(VCPUs__number,v),(VCPUs__utilisation,v),(VCPUs__CPU,v),(VCPUs__params,v),(VCPUs__flags,v),(state,v),(start_time,v),(install_time,v),(last_updated,v),(other_config,v),(hvm,v),(nested_virt,v),(nomigrate,v),(current_domain_type,v)]
[20230915T14:36:35.577Z|debug||0 ||db_write] create_row console (OpaqueRef:ed7d3908-ac7d-4049-99a6-2b5c89a313bc) [(_ref,v),(uuid,v),(protocol,v),(location,v),(VM,v),(other_config,v),(port,v)]
[20230915T14:36:35.577Z|debug||0 ||db_write] create_row console (OpaqueRef:10728092-064d-43c6-a776-59acde821a84) [(_ref,v),(uuid,v),(protocol,v),(location,v),(VM,v),(other_config,v),(port,v)]
[20230915T14:36:35.577Z|debug||0 ||create_misc] Updating Domain 0 metrics record
[20230915T14:36:35.578Z|debug||0 ||db_write] create_row pool (OpaqueRef:6a93ae87-4d44-4ede-aa76-2e41fbbcf190) [(_ref,v),(uuid,v),(name_label,v),(name_description,v),(master,v),(default_SR,v),(suspend_image_SR,v),(crash_dump_SR,v),(other_config,v),(ha_enabled,v),(ha_configuration,v),(ha_statefiles,v),(ha_host_failures_to_tolerate,v),(ha_plan_exists_for,v),(ha_allow_overcommit,v),(ha_overcommitted,v),(blobs,v),(tags,v),(gui_config,v),(health_check_config,v),(wlb_url,v),(wlb_username,v),(wlb_password,v),(wlb_enabled,v),(wlb_verify_cert,v),(redo_log_enabled,v),(redo_log_vdi,v),(vswitch_controller,v),(restrictions,v),(ha_cluster_stack,v),(allowed_operations,v),(current_operations,v),(guest_agent_config,v),(cpu_info,v),(policy_no_vendor_device,v),(live_patching_disabled,v),(igmp_snooping_enabled,v),(uefi_certificates,v),(is_psr_pending,v)]
[20230915T14:36:35.578Z|debug||0 ||db_write] create_row SR (OpaqueRef:8d7987de-4933-4f8f-9443-e26c5809ae7b) [(_ref,v),(uuid,v),(name__label,v),(name__description,v),(allowed_operations,v),(current_operations,v),(virtual_allocation,v),(physical_utilisation,v),(physical_size,v),(type,v),(content_type,v),(shared,v),(other_config,v),(tags,v),(default_vdi_visibility,v),(sm_config,v),(blobs,v),(local_cache_enabled,v),(introduced_by,v),(clustered,v),(is_tools_sr,v)]
[20230915T14:36:35.578Z|debug||0 ||db_write] create_row VDI (OpaqueRef:d40e5c69-8745-4314-a33c-cf833425bd05) [(_ref,v),(uuid,v),(name__label,v),(name__description,v),(allowed_operations,v),(current_operations,v),(SR,v),(virtual_size,v),(physical_utilisation,v),(type,v),(sharable,v),(read_only,v),(other_config,v),(storage_lock,v),(location,v),(managed,v),(missing,v),(parent,v),(xenstore_data,v),(sm_config,v),(is_a_snapshot,v),(snapshot_of,v),(snapshot_time,v),(tags,v),(allow_caching,v),(on_boot,v),(metadata_of_pool,v),(metadata_latest,v),(is_tools_iso,v),(cbt_enabled,v)]
[20230915T14:36:35.578Z|debug||0 ||mux] register SR e00c1eb9-6232-9c06-39bf-b9f0d262111e (currently-registered = [ e00c1eb9-6232-9c06-39bf-b9f0d262111e ])
[20230915T14:36:35.578Z| info||0 ||storage_impl] VDI.enable_cbt dbg:DummyRef:|4aa8fbd5-a4f8-45ab-b54c-4d9ff04f7099|mock sr:e00c1eb9-6232-9c06-39bf-b9f0d262111e vdi:test123
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
ASSERT The parameters should be correctly passed to SMAPIv2 from VDI.enable_cbt
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
ASSERT cbt_enabled should be true when VDI.enable_cbt returns successfully
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
[20230915T14:36:35.578Z|debug||0 ||xapi_vdi] VDI.enable_cbt: Not doing anything, CBT is already enabled
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
ASSERT VDI.enable_cbt should be idempotent
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
[20230915T14:36:35.578Z| info||0 ||storage_impl] VDI.disable_cbt dbg:DummyRef:|4aa8fbd5-a4f8-45ab-b54c-4d9ff04f7099|mock sr:e00c1eb9-6232-9c06-39bf-b9f0d262111e vdi:test123
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
ASSERT The parameters should be correctly passed to SMAPIv2 from VDI.disable_cbt
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
ASSERT cbt_enabled should be false when VDI.disable_cbt returns successfully
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
[20230915T14:36:35.578Z|debug||0 ||xapi_vdi] VDI.disable_cbt: Not doing anything, CBT is already disabled
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
ASSERT VDI.disable_cbt should be idempotent
[33m-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------[0m
